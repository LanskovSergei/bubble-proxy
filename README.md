# Bubble Proxy - Reverse Proxy ั ะทะฐัะธัะพะน ะพั ะฑะปะพะบะธัะพะฒะพะบ

Production-ready ัะตัะตะฝะธะต ะดะปั ะฟัะพะบัะธัะพะฒะฐะฝะธั Bubble ะฟัะธะปะพะถะตะฝะธะน ั ะฐะฒัะพะผะฐัะธัะตัะบะธะผ SSL, ะผะพะฝะธัะพัะธะฝะณะพะผ ะดะพัััะฟะฝะพััะธ ะธ ะทะฐัะธัะพะน ะพั ะฑะปะพะบะธัะพะฒะพะบ.

## ๐ฏ ะะพะทะผะพะถะฝะพััะธ

### โ ะัะพะฑัะพั ัะตะฐะปัะฝะพะณะพ IP ะบะปะธะตะฝัะฐ
- ะะตัะตะดะฐัะฐ ะทะฐะณะพะปะพะฒะบะพะฒ `X-Forwarded-For` ะธ `X-Real-IP`
- ะะตะฐะปัะฝัะน IP ะบะปะธะตะฝัะฐ ะฒะธะดะตะฝ ะฒ Bubble API Connector ะธ ะปะพะณะฐั
- ะะพััะตะบัะฝะฐั ัะฐะฑะพัะฐ ั ะณะตะพะปะพะบะฐัะธะตะน ะธ ะฐะฝะฐะปะธัะธะบะพะน

### โ ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฟัะฐะฒะปะตะฝะธะต SSL
- ะะตัะฟะปะฐัะฝัะต ัะตััะธัะธะบะฐัั Let's Encrypt
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ะบะฐะถะดัะต 12 ัะฐัะพะฒ
- ะะธะบะฐะบะธั ัััะฝัั ะดะตะนััะฒะธะน ัะตัะตะท 3 ะผะตัััะฐ

### โ ะะพะดะดะตัะถะบะฐ Floating IP
- ะััััะฐั ัะผะตะฝะฐ IP ะฟัะธ ะฑะปะพะบะธัะพะฒะบะต ัะตัะตะท ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
- ะะตะท ะฟะตัะตะฝะฐัััะพะนะบะธ ะบะพะฝัะธะณะพะฒ
- ะะพะดะดะตัะถะบะฐ DigitalOcean, Hetzner ะธ ะดััะณะธั ะฟัะพะฒะฐะนะดะตัะพะฒ

### โ ะะฐะฑะพัะฐ ั Telegram Mini Apps
- ะกะฟะตัะธะฐะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ `telegram-web-app.js`
- CORS ะทะฐะณะพะปะพะฒะบะธ ะดะปั ะบะพััะตะบัะฝะพะน ะทะฐะณััะทะบะธ ัะบัะธะฟัะพะฒ
- WebSocket ะฟะพะดะดะตัะถะบะฐ

### โ ะะพะฝะธัะพัะธะฝะณ ั Telegram ะฐะปะตััะฐะผะธ
- ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ ะบะฐะถะดัะต 5 ะผะธะฝัั
- ะญะผัะปััะธั ะทะฐะฟัะพัะพะฒ ะธะท ะะพััะธะธ
- ะะณะฝะพะฒะตะฝะฝัะต ัะฒะตะดะพะผะปะตะฝะธั ะฒ Telegram ะฟัะธ ะฟะฐะดะตะฝะธะธ
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะธ ั ะฒัะตะผะตะฝะตะผ ะดะฐัะฝัะฐะนะผะฐ

## ๐ ะขัะตะฑะพะฒะฐะฝะธั ะบ ัะตัะฒะตัั

- **CPU:** 2 ัะดัะฐ
- **RAM:** 2 GB
- **ะะธัะบ:** 20 GB SSD
- **ะะก:** Ubuntu 22.04 LTS
- **ะัะบััััะต ะฟะพััั:** 80, 443
- **ะะตะบะพะผะตะฝะดัะตะผัะต ะปะพะบะฐัะธะธ:** ะะฐะทะฐัััะฐะฝ (Almaty), ะขัััะธั (Istanbul), ะะะญ (Dubai)

## ๐ ะัััััะน ััะฐัั

### 1. ะะพะดะณะพัะพะฒะบะฐ ัะตัะฒะตัะฐ

```bash
# ะะฑะฝะพะฒะปะตะฝะธะต ัะธััะตะผั
sudo apt update && sudo apt upgrade -y

# ะฃััะฐะฝะพะฒะบะฐ Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# ะฃััะฐะฝะพะฒะบะฐ Docker Compose
sudo apt install -y docker-compose-plugin

# ะะฐัััะพะนะบะฐ firewall
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw --force enable
```

### 2. ะะปะพะฝะธัะพะฒะฐะฝะธะต ะฟัะพะตะบัะฐ

```bash
git clone https://github.com/YOUR_USERNAME/bubble-proxy.git
cd bubble-proxy
```

### 3. ะะฐัััะพะนะบะฐ DNS

ะกะพะทะดะฐะนัะต A-ะทะฐะฟะธัั ะดะปั ะฒะฐัะตะณะพ ะดะพะผะตะฝะฐ:
```
proxy.yourdomain.com โ IP_ะฒะฐัะตะณะพ_ัะตัะฒะตัะฐ
TTL: 300 (ะดะปั ะฑััััะพะน ัะผะตะฝั ะฟัะธ ะฑะปะพะบะธัะพะฒะบะต)
```

### 4. ะะฐัััะพะนะบะฐ Telegram ะฑะพัะฐ

```bash
# 1. ะกะพะทะดะฐะนัะต ะฑะพัะฐ ัะตัะตะท @BotFather
/newbot
# ะกะพััะฐะฝะธัะต TELEGRAM_BOT_TOKEN

# 2. ะะพะปััะธัะต CHAT_ID ัะตัะตะท @userinfobot
/start
# ะกะพััะฐะฝะธัะต CHAT_ID
```

### 5. ะะพะฝัะธะณััะฐัะธั

```bash
cp .env.example .env
nano .env
```

ะะฐะฟะพะปะฝะธัะต ะฟะตัะตะผะตะฝะฝัะต:
```env
DOMAIN=proxy.yourdomain.com
BUBBLE_DOMAIN=your-app.bubbleapps.io
SSL_EMAIL=your@email.com
TELEGRAM_BOT_TOKEN=1234567890:ABC...
TELEGRAM_CHAT_ID=123456789
MONITOR_INTERVAL=300
```

### 6. ะะฐะฟััะบ

```bash
# ะะตัะฒัะน ะทะฐะฟััะบ (ะฟะพะปััะตะฝะธะต SSL ัะตััะธัะธะบะฐัะฐ)
./deploy.sh init

# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
./deploy.sh start

# ะัะพะฒะตัะบะฐ ััะฐัััะฐ
./deploy.sh status
```

## ๐ ะฃะฟัะฐะฒะปะตะฝะธะต

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```bash
./deploy.sh start       # ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
./deploy.sh stop        # ะััะฐะฝะพะฒะบะฐ ะฒัะตั ัะตัะฒะธัะพะฒ
./deploy.sh restart     # ะะตัะตะทะฐะฟััะบ
./deploy.sh status      # ะกัะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
./deploy.sh logs        # ะัะพัะผะพัั ะปะพะณะพะฒ ะฒัะตั ัะตัะฒะธัะพะฒ
./deploy.sh logs nginx  # ะัะพัะผะพัั ะปะพะณะพะฒ ัะพะปัะบะพ nginx
```

### ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะบะพะผะฐะฝะดั

```bash
./deploy.sh update-config   # ะะฑะฝะพะฒะธัั ะบะพะฝัะธะณััะฐัะธั nginx ะธะท .env
./deploy.sh check-ssl       # ะัะพะฒะตัะธัั ััะพะบ ะดะตะนััะฒะธั SSL
./deploy.sh backup          # ะกะพะทะดะฐัั ะฑัะบะฐะฟ ะบะพะฝัะธะณััะฐัะธะธ
./deploy.sh test-monitor    # ะะฐะฟัััะธัั ะฟัะพะฒะตัะบั ะฒัััะฝัั
```

## ๐ ะกะผะตะฝะฐ IP ะฟัะธ ะฑะปะพะบะธัะพะฒะบะต

### ะะฐัะธะฐะฝั 1: Floating IP (DigitalOcean, Hetzner)

```bash
# 1. ะ ะฟะฐะฝะตะปะธ ัะพััะธะฝะณะฐ ะฟะตัะตะฟัะธะฒัะถะธัะต Floating IP ะบ ะฝะพะฒะพะผั ัะตัะฒะตัั
# 2. DNS ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดัะฒะฐัะธั ะฝะพะฒัะน ะฐะดัะตั
# 3. ะะฐัะฝัะฐะนะผ: ~5-10 ะผะธะฝัั
```

### ะะฐัะธะฐะฝั 2: ะะพะฒัะน ัะตัะฒะตั

```bash
# ะะฐ ะฝะพะฒะพะผ ัะตัะฒะตัะต
git clone https://github.com/YOUR_USERNAME/bubble-proxy.git
cd bubble-proxy
cp /path/to/old/.env .env
./deploy.sh init
./deploy.sh start

# ะะฑะฝะพะฒะธัะต A-ะทะฐะฟะธัั ะฒ DNS ะฝะฐ ะฝะพะฒัะน IP
# ะะฐัะฝัะฐะนะผ: ~15-20 ะผะธะฝัั
```

### ะะฐัะธะฐะฝั 3: ะะตะทะตัะฒะฝัะต ะดะพะผะตะฝั (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะกะพะทะดะฐะนัะต ะทะฐัะฐะฝะตะต 2-3 ะดะพะผะตะฝะฐ
proxy1.yourdomain.com โ Server1
proxy2.yourdomain.com โ Server2
proxy3.yourdomain.com โ Server3

# ะัะธ ะฑะปะพะบะธัะพะฒะบะต ะฟัะพััะพ ะฟะตัะตะบะปััะฐะนัะตัั ะฝะฐ ัะตะทะตัะฒะฝัะน ะดะพะผะตะฝ
# ะะณะฝะพะฒะตะฝะฝะพะต ะฟะตัะตะบะปััะตะฝะธะต ะฑะตะท ะฟัะพััะพั
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะงัะพ ะพััะปะตะถะธะฒะฐะตััั

- โ ะะพัััะฟะฝะพััั ะฟัะพะบัะธ ะบะฐะถะดัะต 5 ะผะธะฝัั
- โ ะะฐะปะธะดะฝะพััั SSL ัะตััะธัะธะบะฐัะฐ
- โ ะัะตะผั ะพัะฒะตัะฐ (ะฟัะตะดัะฟัะตะถะดะตะฝะธะต ะฟัะธ >5 ัะตะบัะฝะด)
- โ ะญะผัะปััะธั ะทะฐะฟัะพัะพะฒ ะธะท ะะค
- โ ะะฒัะพะผะฐัะธัะตัะบะธะต Telegram ะฐะปะตััั

### ะัะธะผะตัั ัะฒะตะดะพะผะปะตะฝะธะน

**ะัะธ ะทะฐะฟััะบะต:**
```
๐ ะะพะฝะธัะพัะธะฝะณ ะทะฐะฟััะตะฝ
ะะพะผะตะฝ: proxy.yourdomain.com
ะะฝัะตัะฒะฐะป: 300s
ะะตะถะธะผ ะะค: ะะฐ
```

**ะัะธ ะฝะตะดะพัััะฟะฝะพััะธ:**
```
๐ด ะะะะะกะ ะะะะะกะขะฃะะะ
ะะพะผะตะฝ: proxy.yourdomain.com
ะกัะฐััั: Timeout
โ๏ธ ะัะพะฒะตัั ัะตัะฒะตั ะธ DNS ะฝะฐัััะพะนะบะธ
```

**ะัะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะธ:**
```
โ ะะะะะกะ ะะะกะกะขะะะะะะะ
ะะพะผะตะฝ: proxy.yourdomain.com
ะะฐัะฝัะฐะนะผ: 120 ัะตะบัะฝะด
๐ ะัั ัะฐะฑะพัะฐะตั ะฝะพัะผะฐะปัะฝะพ
```

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ
โ   ะะปะธะตะฝั    โ
โโโโโโโโฌโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Nginx (Proxy)      โ
โ  - SSL Termination  โ
โ  - Real IP Forward  โ
โ  - Rate Limiting    โ
โโโโโโโโฌโโโโโโโโโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโโโโโโโโโ
โ  Bubble App         โ
โ  your-app.bubble.io โ
โโโโโโโโโโโโโโโโโโโโโโโ

       โฒ
       โ
โโโโโโโโดโโโโโโโโโโโโโโโ
โ  Monitor            โ
โ  - Health Checks    โ
โ  - Telegram Alerts  โ
โโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐๏ธ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
bubble-proxy/
โโโ docker-compose.yml       # ะัะบะตัััะฐัะธั ะบะพะฝัะตะนะฝะตัะพะฒ
โโโ deploy.sh               # ะกะบัะธะฟั ัะฟัะฐะฒะปะตะฝะธั
โโโ .env.example            # ะัะธะผะตั ะบะพะฝัะธะณััะฐัะธะธ
โโโ README.md               # ะะพะบัะผะตะฝัะฐัะธั
โโโ nginx/
โ   โโโ nginx.conf          # ะะฐะทะพะฒะฐั ะบะพะฝัะธะณััะฐัะธั Nginx
โ   โโโ conf.d/
โ       โโโ default.conf.template  # ะจะฐะฑะปะพะฝ ะฟัะพะบัะธ ะบะพะฝัะธะณะฐ
โโโ monitor/
โ   โโโ Dockerfile          # Docker ะพะฑัะฐะท ะผะพะฝะธัะพัะฐ
โ   โโโ check.py            # Python ัะบัะธะฟั ะผะพะฝะธัะพัะธะฝะณะฐ
โ   โโโ requirements.txt    # ะะฐะฒะธัะธะผะพััะธ Python
โโโ certbot/                # SSL ัะตััะธัะธะบะฐัั (ะฝะต ะฒ git)
โ   โโโ conf/
โ   โโโ www/
โโโ logs/                   # ะะพะณะธ (ะฝะต ะฒ git)
    โโโ nginx/
    โโโ certbot/
    โโโ monitor/
```

## ๐ง Troubleshooting

### SSL ัะตััะธัะธะบะฐั ะฝะต ะฒัะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัััะต DNS
nslookup proxy.yourdomain.com
# ะะพะปะถะตะฝ ะฟะพะบะฐะทัะฒะฐัั IP ะฒะฐัะตะณะพ ัะตัะฒะตัะฐ

# ะัะพะฒะตัััะต ะดะพัััะฟะฝะพััั ะฟะพััะฐ 80
sudo netstat -tlnp | grep :80

# ะะพะฟัะพะฑัะนัะต ะฟะพะปััะธัั ัะตััะธัะธะบะฐั ะฒัััะฝัั
./deploy.sh stop
./deploy.sh init
```

### IP ะฝะต ะฟะตัะตะดะฐัััั ะฒ Bubble

```bash
# ะัะพะฒะตัััะต ะทะฐะณะพะปะพะฒะบะธ ะฒ nginx ะบะพะฝัะธะณะต
docker-compose exec nginx cat /etc/nginx/conf.d/default.conf | grep X-Real-IP

# ะะพะปะถะฝะพ ะฑััั:
# proxy_set_header X-Real-IP $remote_addr;
# proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

# ะะตัะตะทะฐะฟัััะธัะต nginx
./deploy.sh restart
```

### Telegram ะฝะต ะฟะพะปััะฐะตั ะฐะปะตััั

```bash
# ะัะพะฒะตัััะต ัะพะบะตะฝ ะฑะพัะฐ
curl -s "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"

# ะัะพะฒะตัััะต ะพัะฟัะฐะฒะบั ัะตััะพะฒะพะณะพ ัะพะพะฑัะตะฝะธั
curl -s "https://api.telegram.org/bot<YOUR_TOKEN>/sendMessage?chat_id=<YOUR_CHAT_ID>&text=test"

# ะัะพะฒะตัััะต ะปะพะณะธ ะผะพะฝะธัะพัะฐ
./deploy.sh logs monitor
```

## ๐ฐ ะกัะพะธะผะพััั

ะัะธะผะตัะฝัะน ะฑัะดะถะตั ะฝะฐ ะผะตััั:

| ะะพะผะฟะพะฝะตะฝั | ะกัะพะธะผะพััั |
|-----------|-----------|
| VPS (2GB RAM, ะะฐะทะฐัััะฐะฝ) | $5-10/ะผะตััั |
| ะะพะผะตะฝ | $10-15/ะณะพะด |
| Floating IP (ะพะฟัะธะพะฝะฐะปัะฝะพ) | $3/ะผะตััั |
| Telegram ะฑะพั | ะะตัะฟะปะฐัะฝะพ |
| SSL ัะตััะธัะธะบะฐั | ะะตัะฟะปะฐัะฝะพ |
| **ะะขะะะ** | **~$8-13/ะผะตััั** |

## ๐ ะะตะบะพะผะตะฝะดัะตะผัะต ะฟัะพะฒะฐะนะดะตัั

### ะะฐะทะฐัััะฐะฝ (ะปัััะธะน ะฒัะฑะพั)
- **ps.kz** - ะฝะฐะดัะถะฝัะน, ~$8/ะผะตั
- **host.kz** - ะดะตัะตะฒะปะต, ~$5/ะผะตั  
- **hoster.kz** - ะทะพะปะพัะฐั ัะตัะตะดะธะฝะฐ

### ะะตะถะดัะฝะฐัะพะดะฝัะต
- **DigitalOcean** - ั Floating IP, $12/ะผะตั
- **Hetzner** - ัะฐะผัะน ะดะตััะฒัะน, โฌ5/ะผะตั
- **Vultr** - ััะฐะฑะธะปัะฝัะน, $10/ะผะตั

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต SSL ัะตััะธัะธะบะฐัะพะฒ
- Rate limiting ะดะปั ะทะฐัะธัั ะพั DDoS
- ะกะบัััะธะต ะฒะตััะธะธ Nginx
- ะััััััะฒะธะต ััะฒััะฒะธัะตะปัะฝัั ะดะฐะฝะฝัั ะฒ Git
- ะะพะดะดะตัะถะบะฐ ัะพะปัะบะพ TLSv1.2 ะธ TLSv1.3

## ๐ ะะธัะตะฝะทะธั

MIT License - ัะฒะพะฑะพะดะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะดะปั ะบะพะผะผะตััะตัะบะธั ะธ ะฝะตะบะพะผะผะตััะตัะบะธั ะฟัะพะตะบัะพะฒ.

## ๐ค ะะพะดะดะตัะถะบะฐ

ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฟัะพะฑะปะตะผ:
1. ะัะพะฒะตัััะต ะปะพะณะธ: `./deploy.sh logs`
2. ะัะพะฒะตัััะต DNS: `nslookup your-domain.com`
3. ะัะพะฒะตัััะต SSL: `./deploy.sh check-ssl`
4. ะัะพะฒะตัััะต ััะฐััั: `./deploy.sh status`

Telegram ะฐะปะตััั ัะฒะตะดะพะผัั ะฒะฐั ะพ ะฟัะพะฑะปะตะผะฐั ะฟะตัะฒัะผะธ!

---

Made with โค๏ธ for Bubble developers
